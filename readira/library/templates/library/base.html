{% load static i18n %}
<!DOCTYPE html>
<html lang= '{% get_current_language as LANGUAGE_CODE %} {{LANGUAGE_CODE}}' class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0'>
    <title>Readira</title>

    <!-- Alpine.js for interactivity-->
    <script defer src = 'https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js'></script>

    <!-- Phosfor Icons-->
    <script src = 'https://unpkg.com/@phosphor-icons/web'></script>

    <!-- Tailwind CSS-->
    <link href = '{%static "css/tailwind.css" %}' rel = 'stylesheet'>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Dark mode script from cookie-->
    <script>
        (function() {
            const theme = document.cookie.split('; ').find(row => row.startsWith('theme='));
            const prefersDark = !theme || theme.includes('dark');
            if (prefersDark) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
</head>
<body class = 'h-full flex flex-col bg-black text-white transition-colors duration-300' id = 'theme-root'>

<!-- Header-->
    <header class='sticky top-0 z-50 bg-zinc-900 text-white px-6 py-3 flex items-center justify-between shadow'>
    
        <!-- Left Section -->
        <div class = 'text-2xl font-bold'>
            <a href = '/' class='hover:bg-green-600 px-1 rounded'>READIRA</a>
        </div>
        <!-- Right Section -->
        <div class="hidden md:flex items-center space-x-4">
            <!-- Language Switcher -->
            <form action='{% url "set_language" %}' method='post'>
                {% csrf_token%}
                <select name='language' onchange='this.form.submit()'
                    class="bg-zinc-600 text-white text-sm px-2 py-1 rounded-md transition-colors duration-300">    
                    <option value='en' {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>EN</option>
                    <option value='ro' {% if LANGUAGE_CODE == 'ro' %}selected{% endif %}>RO</option>
                </select>
            </form>

            <!-- Authentication buttons -->
            <a href="/login" class="px-4 py-2 bg-green-800 text-white rounded-xl text-sm">Log In</a>
            <a href="/signup" class="px-4 py-2 bg-yellow-400 text-black rounded-xl text-sm font-semibold">Sign Up</a>
            
            <!-- Theme toggle -->
            <button onclick="toggleTheme()" class="text-xl hover:text-yellow-400 transition" title="Toggle theme">
                <i id="theme-icon" class="ph ph-moon"></i>
            </button>
        </div>
    </header>


<!-- Content -->
    <main class='container mx-auto flex-grow'>
        {% block content %}
        {% endblock %}
    </main>

<!-- Footer -->
    <footer class='bg-zinc-900 text-center text-white py-4 '>
        <div class='container mx-auto px-6 flex flex-col items-start gap-2'>
            <p class='w-full text-left mb-2 font-semibold text-lg'>Contact us</p>
            <p>
                <i class='ph ph-phone text-lg'></i>
                + 40 740 123 456
            </p>
            <p>
                <i class='ph ph-envelope-simple text-lg'></i>
                contact@readira.ro
            </p>
        </div>

    </footer>
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const body = document.getElementById('theme-root');
            const icon = document.getElementById('theme-icon');
            const isDark = html.classList.toggle('dark');
            if (isDark) {
                body.classList.remove('bg-white', 'text-black');
                body.classList.add('bg-black', 'text-white');
                document.cookie = 'theme=dark; path=/; max-age=31536000';
                if (icon) icon.className = 'ph ph-sun';
            } else {
                body.classList.remove('bg-black', 'text-white');
                body.classList.add('bg-white', 'text-black');
                document.cookie = 'theme=light; path=/; max-age=31536000';
                icon.className = 'ph ph-moon';
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            const isDark = document.documentElement.classList.contains('dark');
            const icon = document.getElementById('theme-icon');
            if (icon) {
            icon.className = isDark ? 'ph ph-sun' : 'ph ph-moon';
            }
        });

    </script>
</body>
</html>