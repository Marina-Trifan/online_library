{% load static i18n %}
<!DOCTYPE html>
<html lang= '{% get_current_language as LANGUAGE_CODE %} {{LANGUAGE_CODE}}'>
<head>
    <meta charset="UTF-8">
    <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0'>
    <title>Readira</title>

    <!-- Alpine.js for interactivity-->
    <script defer src = 'https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js'></script>

    <!-- Phosfor Icons-->
    <script src = 'https://unpkg.com/@phosphor-icons/web'></script>

    <!-- Tailwind CSS-->
    <link href = '{%static "css/tailwind.css" %}' rel = 'stylesheet'>

    <!-- Dark mode script from cookie-->
    <script>
        (function() {
            const theme = document.cookie.split('; ').find(row => row.startsWith('theme='));
            const prefersDark = !theme || theme.includes('dark');
            if (prefersDark) {
                documentElement.classList.add('dark');
            }
        })();
    </script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
</head>
<body class = 'bg-black text-white transition-colors duration-300' id = 'theme-root'>

<!-- Navbar-->
    <nav class = 'sticky top-0 z-50 dark:bg-zinc-900 px-6 py-3 flex items-center
    justify-between text-black dark:text-white shadow'></nav>
        <!-- Left Section -->
        <div class = 'text-2xl font-bold'>
            <a href = '/' class='hover:bg-green=600 px-1 rounded transition-colors duration-200'>READIRA</a>
        </div>

        <!-- Centre Section -->
        <ul class='hidden md:flex space-x-6'>
            <li><a href = '/reading_materials' class ='hover:bg-blue-500 px-1 rounded transition-colors duration-200'>Reading Materials</a></li>
            <li><a href = '/authors' class = 'hover: bg-yellow-400 px-1 rounded transition-colors duration-200'>Authors</a></li>
            <li><a href = '/genres' class = 'hover:bg-green-500 px 1 rounded transition-colors duration-200'>Genres</a></li>
        </ul>

        <!-- Right Section -->
        <div class='flex items-center gap-3 ml-auto'>
            <!-- Search Form -->
            <form action = '/search' method ='get' class='flex items-center'>
                <input type='search' name='q' placeholder='Search your next read...'
                       class='rounded-1 px-3 py-1 text black focus:outline-none'/>
                <button type='submit'
                        class='bg-gray-200 px-3 py-1 rounded-r hover:bg-gray-400 transition-colors duration-200'>
                    Search
                </button>
            </form>
            <!-- Language Switcher -->
            <form action='{% url "set_language" %}' method='post'>
                {% csrf_token%}
                <select name='language' onchange='this.form.submit()' class='bg-zinc-200 dark:bg-zinc-800 text black dark:text-white text-sm px-2 py-1 rounded-md'>
                    <option value='en' {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>EN</option>
                    <option value='ro' {% if LANGUAGE_CODE == 'ro' %}selected{% endif %}>RO</option>
                </select>
            </form>
        </div>
    </nav>
<!-- Content -->
    <main class='container mx-auto px-6 py-8'>
        {% block content %}
        {% endblock %}
    </main>

<!-- Footer -->
    <footer class='bg-zinc-900 text-center text-white py-4 mt-auto'>
        <div class='container mx-auto px-6 flex flex-col md:flex-row justify-between item-center gap-4'>
            <p>
                <i class='ph ph-phone text-lg'></i>
                + 40 740 123 456
            </p>
            <p>
                <i class='ph ph-envelope-simple text-lg'></i>
                contact@readira.ro
            </p>>
        </div>

    </footer>
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const body = document.getElementById('theme-root');
            const isDark = html.classList.toggle('dark');
            if (isDark) {
                body.classList.remove('bg-white', 'text-black');
                body.classList.add('bg-black', 'text-white');
                document.cookie = 'theme=dark; path=/; max-age=31536000';
            } else {
                body.classList.remove('bg-black', 'text-white');
                body.classList.add('bg-white', 'text-black');
                document.cookie = 'theme-Light; path=/; max-age=31536000';
            }
        }
    </script>
</body>
</html>